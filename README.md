# Телеграм-бот для игры "90 дней - 10 целей"

Автоматизированный бот для управления игрой по достижению целей на 90 дней.

## Возможности

- ✅ Регистрация участников
- ✅ Установка 10 целей каждым участником
- ✅ Ежедневные отчеты о прогрессе через удобный UI с кнопками
- ✅ Автоматические напоминания о необходимости отправки отчета
- ✅ Отслеживание прогресса (минимум 2 цели в день, кроме дней отдыха)
- ✅ Автоматическое исключение неактивных участников
- ✅ Интеграция с Яндекс.Диском для хранения данных в Excel
- ✅ Панель администратора для управления игрой

## Установка

### Быстрый старт (локально)

1. Клонируйте репозиторий:
```bash
git clone <ваш_репозиторий>
cd 90_days
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Настройте переменные окружения:
```bash
cp .env.example .env
# Отредактируйте файл .env и заполните токены
```

5. Запустите бота:
```bash
python bot.py
```

### Деплой

Подробные инструкции по деплою на различные платформы см. в [DEPLOY.md](DEPLOY.md)

**Быстрый деплой через Docker:**
```bash
docker-compose up -d
```

## Структура проекта

```
.
├── bot.py                  # Точка входа в приложение
├── config_reader.py       # Чтение конфигурации
├── states.py              # FSM состояния
├── requirements.txt       # Зависимости
├── handlers/             # Обработчики команд
│   ├── common.py         # Общие команды
│   ├── registration.py   # Регистрация
│   ├── goals.py          # Управление целями
│   ├── reports.py        # Отчеты
│   └── admin.py          # Администрирование
├── keyboards/            # Клавиатуры
│   └── common.py
└── services/             # Сервисы
    ├── game_data.py      # Работа с данными игры
    ├── yandex_sheets.py  # Интеграция с Яндекс.Диском
    └── reminders.py      # Напоминания
```

## Команды бота

### Для участников:
- `/start` - Начать работу с ботом
- `/register` - Зарегистрироваться в игре
- `/goals` - Установить/просмотреть цели
- `/report` - Отправить ежедневный отчет
- `/help` - Справка

### Для администраторов:
- `/admin` - Панель администратора
- `/admin_stats` - Статистика по игре
- `/admin_users` - Список участников
- `/admin_remind` - Отправить напоминание всем

## Правила игры

1. Каждый участник устанавливает 10 целей на 90 дней
2. Ежедневно необходимо отправлять отчет о прогрессе
3. Минимум по 2 целям должен быть прогресс в обычные дни
4. Раз в 10 дней разрешен день отдыха
5. Не отправивший отчет до конца дня выбывает из игры
6. Не показавший достаточного прогресса также выбывает

## Используемые технологии

- **aiogram 3.x** - фреймворк для создания Telegram ботов
- **openpyxl** - работа с Excel файлами
- **pydantic-settings** - управление конфигурацией
- **aiohttp** - асинхронные HTTP запросы к Яндекс.Диску

## Примечания

- Данные хранятся в Excel файле на Яндекс.Диске
- Бот автоматически создает файл при первом запуске
- Напоминания отправляются в 18:00 ежедневно
- Проверка и исключение участников происходит в 23:30

